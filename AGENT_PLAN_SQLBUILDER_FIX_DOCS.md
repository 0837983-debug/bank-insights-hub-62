# План: Fix SQL Builder — Docs

**Цель:** задокументировать новый контракт sqlbuilder и критерии успешности.
**Статус:** ✅ Завершено

## Задачи
- [x] Описать вход: `queryId` и `paramsJson` ✅
- [x] Примеры запросов и ответов ✅
- [x] Описать ошибки missing/excess params (с примером) ✅
- [x] Описать ошибку wrap_json=false ✅
- [x] Явные критерии успешности ✅

## Файлы для изменения
- `docs/api/get-data.md` ✅ (обновлено)

## Критерии завершения
- [x] Документация с примерами и критериями успеха ✅

## Выполнено

### Обновлена документация

1. **docs/api/get-data.md:**
   - Добавлен раздел "Контракт SQL Builder" с описанием входных данных (`queryId` + `paramsJson`)
   - Описан процесс работы SQL Builder (6 шагов)
   - Обновлен раздел "Ограничения" с детальным описанием проверки `wrapJson=true`
   - Добавлено описание строгой проверки параметров (missing/excess)
   - Обновлен раздел "Обработка ошибок" с примерами:
     - `invalid JSON` - невалидный JSON
     - `invalid config` - конфиг не найден
     - `invalid params` - missing/excess параметры (с примерами)
     - `wrap_json=false` - ошибка при wrapJson=false
   - Добавлен раздел "Критерии успешности" с 6 явными критериями
   - Добавлены примеры ошибок в разделе "Примеры использования":
     - Missing params
     - Excess params
     - Невалидный JSON
     - wrapJson=false

### Ключевые изменения

- ✅ **Контракт SQL Builder** - описан новый формат (`queryId` + `paramsJson`)
- ✅ **Строгая валидация параметров** - missing/excess params с детальными ошибками
- ✅ **Критерии успешности** - 6 явных критериев для успешного запроса
- ✅ **Примеры ошибок** - детальные примеры всех типов ошибок
- ✅ **Ошибка wrapJson=false** - обновлен формат ошибки
