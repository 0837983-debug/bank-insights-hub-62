# План: Шаг 4 (фикс) — Docs

**Цель:** обновить документацию по getData API.
**Статус:** ✅ Завершено

## Задачи
- [x] Обновить описание endpoint GET /api/data/:query_id ✅
- [x] Описать формат ответа `{ componentId, type, rows }` ✅
- [x] Описать ошибку при wrapJson=false ✅
- [x] Убрать упоминание POST endpoint ✅

## Файлы для изменения
- `docs/api/get-data.md` ✅ (создан)
- `docs/api/endpoints.md` ✅ (обновлено)
- `docs/api/index.md` ✅ (обновлено)

## Критерии завершения
- [x] Документация актуальна ✅

## Выполнено

### Создана документация

1. **docs/api/get-data.md:**
   - Создан новый файл с полным описанием Get Data API
   - Описан формат запроса: `GET /api/data/:query_id` с query параметрами
   - Описан формат ответа: `{ componentId, type, rows }`
   - Добавлено описание ограничения: `wrapJson=true` обязательно
   - Описана ошибка при `wrapJson=false`: `400 Bad Request` с сообщением `"Query must have wrapJson=true"`
   - Добавлены примеры использования (TypeScript, React Hook)
   - Описана автоматическая трансформация данных
   - Добавлены разделы об обработке ошибок и автоматическом определении типов параметров

2. **docs/api/endpoints.md:**
   - Добавлен раздел "Get Data Endpoints" с кратким описанием
   - Добавлен пример запроса и ответа
   - Добавлено ограничение о `wrapJson=true`
   - Добавлена ссылка на детальную документацию

3. **docs/api/index.md:**
   - Добавлена ссылка на Get Data API в раздел "Основные разделы"

### Ключевые изменения

- ✅ **GET endpoint** - описан формат `GET /api/data/:query_id`
- ✅ **Формат ответа** - `{ componentId, type, rows }`
- ✅ **Ограничение wrapJson** - обязательно `wrapJson=true`, иначе ошибка 400
- ❌ **POST endpoint** - не упоминается (удален)
- ✅ **Query параметры** - описан формат с `component_id` и другими параметрами
- ✅ **Автоматическая трансформация** - описана обработка данных (id, sortOrder, типы)
