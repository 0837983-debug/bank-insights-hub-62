# –û—Ç—á—ë—Ç QA: –ë–ª–æ–∫ B.0 FIX ‚Äî –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ mapping (–≠—Ç–∞–ø 2)

**–î–∞—Ç–∞**: 2026-01-26  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: QA Agent  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ –∫–æ–¥–µ

#### ‚úÖ validationService.ts
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `getFieldMapping` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ (`export async function getFieldMapping`)
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö

#### ‚úÖ uploadRoutes.ts
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getFieldMapping` –∏–∑ `validationService.ts`
- ‚úÖ –£–±—Ä–∞–Ω–∞ –∂—ë—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–æ–ª—É—á–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ mapping:
  ```typescript
  const mapping = await getFieldMapping(targetTable);
  const requiredHeaders = mapping
    .filter((m) => m.isRequired)
    .map((m) => m.sourceField);
  ```

#### ‚úÖ fileParserService.ts
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `validateFileStructure` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º:
  ```typescript
  const headersLower = headers.map((h) => h.toLowerCase());
  if (!headersLower.includes(required.toLowerCase())) {
    missing.push(required);
  }
  ```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ mapping –≤ –ë–î

**–¢–µ–∫—É—â–∏–π mapping –¥–ª—è `balance`**:
| source_field | target_field | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | —Ç–∏–ø |
|--------------|--------------|---------------|-----|
| month | period_date | ‚úÖ true | date |
| class | class | ‚úÖ true | varchar |
| section | section | ‚ùå false | varchar |
| item | item | ‚ùå false | varchar |
| amount | value | ‚úÖ true | numeric |

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**: `month`, `class`, `amount` (–≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ)

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ**: `['Class', 'Section', 'Item', 'Amount', 'Month']` (—Å –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏—è**:
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–∞–π–ª–∞ (lowercase): `class`, `section`, `item`, `amount`, `month`
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (lowercase): `month`, `class`, `amount`
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–∞–π–¥–µ–Ω—ã!

**–í—ã–≤–æ–¥**: Case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∏–∑ mapping.

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

#### STG (stg.balance_upload)
- ‚úÖ **–ó–∞–ø–∏—Å–µ–π**: 70
- ‚úÖ **–ü–µ—Ä–∏–æ–¥ –¥–∞—Ç**: 2024-12-01 - 2025-12-01
- ‚úÖ **–§–æ—Ä–º–∞—Ç –¥–∞—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (YYYY-MM-DD)
- ‚úÖ **–ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞**: 2026-01-26 12:21:15

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π**:
- `2025-01-01 | assets | loans | retail_loans | 5000000000.00`
- `2025-01-01 | liabilities | deposits | term_deposits_individual | 4400000000.00`

#### ODS (ods.balance)
- ‚úÖ **–ó–∞–ø–∏—Å–µ–π**: 20
- ‚úÖ **–ü–µ—Ä–∏–æ–¥ –¥–∞—Ç**: 2024-12-01 - 2025-12-01
- ‚úÖ **–§–æ—Ä–º–∞—Ç –¥–∞—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (YYYY-MM-DD)

#### MART (mart.balance)
- ‚úÖ **–ó–∞–ø–∏—Å–µ–π**: 15
- ‚úÖ **–ü–µ—Ä–∏–æ–¥ –¥–∞—Ç**: 2024-12-31 - 2025-12-31
- ‚úÖ **–§–æ—Ä–º–∞—Ç –¥–∞—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (YYYY-MM-DD)

---

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ Balance**:
- **ID 50**: –°—Ç–∞—Ç—É—Å `failed` (2026-01-26 15:23:24) - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **ID 49**: –°—Ç–∞—Ç—É—Å `failed` (2026-01-26 15:12:15) - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **ID 37**: –°—Ç–∞—Ç—É—Å `completed` (2026-01-26 12:21:15) - —É—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CSV

**–û—à–∏–±–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ (ID 50)**:
- –¢–∏–ø: `missing_headers`
- –°–æ–æ–±—â–µ–Ω–∏–µ: `–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏: month, class, amount`
- **–ü—Ä–∏—á–∏–Ω–∞**: –ó–∞–≥—Ä—É–∑–∫–∞ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω)

---

### 6. –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≥—Ä—É–∑–∫–∏** (Upload ID: 51):
```json
{
  "uploadId": 51,
  "status": "failed",
  "validationErrors": {
    "totalCount": 1371,
    "byType": {
      "required_missing": 1029,
      "duplicate_record": 342
    },
    "examples": [
      {
        "type": "required_missing",
        "field": "month",
        "message": "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ \"month\" –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ"
      },
      {
        "type": "duplicate_record",
        "field": "month",
        "message": "–î—É–±–ª–∏–∫–∞—Ç –∑–∞–ø–∏—Å–∏ (period_date: undefined, class: undefined, ...)"
      }
    ]
  }
}
```

**–ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫**:
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–∞ –ø—Ä–æ—à–ª–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–∞–π–¥–µ–Ω—ã —á–µ—Ä–µ–∑ case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)
- ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø—Ä–æ—à–ª–∞: –ø–æ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ `row[map.sourceField]`
- ‚ùå –ü—Ä–∏—á–∏–Ω–∞: –ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç `row` —Å –∫–ª—é—á–∞–º–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ñ–∞–π–ª–∞ (`Month`, `Class`, `Amount`), –Ω–æ –∫–æ–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ –∫–ª—é—á–∞–º –∏–∑ mapping (`month`, `class`, `amount`)

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **–ñ—ë—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —É–¥–∞–ª–µ–Ω—ã**
   - ‚úÖ `uploadRoutes.ts` –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ mapping
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `getFieldMapping`

2. **Case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
   - ‚úÖ `validateFileStructure` —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
   - ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–∞–π–ª–∞ (`Class`, `Month`, `Amount`) —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ (`month`, `class`, `amount`)

### ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–ü—Ä–æ–±–ª–µ–º–∞: Case-sensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –≤ –æ–±—ä–µ–∫—Ç–µ row**

**–§–∞–π–ª—ã**: 
- `backend/src/services/upload/validationService.ts` (—Å—Ç—Ä–æ–∫–∞ 196)
- `backend/src/services/upload/ingestionService.ts` (—Å—Ç—Ä–æ–∫–∏ 42, 51, 52, 55, 58)

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç `row` —Å –∫–ª—é—á–∞–º–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ñ–∞–π–ª–∞: `{ Month: '2024-12-01', Class: '–ê–ö–¢–ò–í–´', Amount: 1000 }`
- –ö–æ–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–æ–ª—è–º –ø–æ –∫–ª—é—á–∞–º –∏–∑ mapping: `row[map.sourceField]` –≥–¥–µ `map.sourceField = "month"` (–≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `row["month"]` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `undefined`, —Ö–æ—Ç—è –≤ –æ–±—ä–µ–∫—Ç–µ –µ—Å—Ç—å `row["Month"]`

**–í–ª–∏—è–Ω–∏–µ**: 
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—è (`required_missing`)
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤ STG –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—è (`undefined` –∑–Ω–∞—á–µ–Ω–∏—è)
- –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ**: 
–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å case-insensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –≤ –æ–±—ä–µ–∫—Ç–µ `row`:
- –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –≤ –æ–±—ä–µ–∫—Ç–µ `row` –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É)
- –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è case-insensitive –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –æ–±—ä–µ–∫—Ç–∞

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **Case-insensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–µ**
   - ‚ùå `validationService.ts` - —Ñ—É–Ω–∫—Ü–∏—è `validateRow` (—Å—Ç—Ä–æ–∫–∞ 196)
   - ‚ùå `ingestionService.ts` - —Ñ—É–Ω–∫—Ü–∏—è `loadToSTG` (—Å—Ç—Ä–æ–∫–∏ 42, 51, 52, 55, 58)
   - ‚ùå `uploadRoutes.ts` - –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–∂–µ (—Å—Ç—Ä–æ–∫–∞ 316)

---

## –í—ã–≤–æ–¥—ã

### ‚úÖ –ö–æ–¥ —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω:

1. ‚úÖ `getFieldMapping` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏–∑ mapping —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ Case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–∞
4. ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–∞–π–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∏–∑ mapping (–ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

### ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:

1. ‚ùå Case-sensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –≤ –æ–±—ä–µ–∫—Ç–µ `row` –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
2. ‚ùå Case-sensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –≤ –æ–±—ä–µ–∫—Ç–µ `row` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤ STG
3. ‚ùå –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ `undefined` –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–µ–π

### üìä –°—Ç–∞—Ç—É—Å:

- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)**: ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω—ã
- **–õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö**: ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (case-sensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º)
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞**: ‚ùå –ù–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç (–ø–æ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã)
- **–î–∞–Ω–Ω—ã–µ –≤ –ë–î**: ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (–¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD)

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è Backend Agent:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å case-sensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –≤ –æ–±—ä–µ–∫—Ç–µ row**
   - –°–æ–∑–¥–∞—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è case-insensitive –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è:
     ```typescript
     function getRowValue(row: ParsedRow, fieldName: string): any {
       // –ò—â–µ–º –ø–æ–ª–µ –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
       const key = Object.keys(row).find(k => k.toLowerCase() === fieldName.toLowerCase());
       return key ? row[key] : undefined;
     }
     ```
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤:
     - `validationService.ts` - —Ñ—É–Ω–∫—Ü–∏—è `validateRow` (—Å—Ç—Ä–æ–∫–∞ 196)
     - `ingestionService.ts` - —Ñ—É–Ω–∫—Ü–∏—è `loadToSTG` (—Å—Ç—Ä–æ–∫–∏ 42, 51, 52, 55, 58)
     - `uploadRoutes.ts` - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Å—Ç—Ä–æ–∫–∞ 316)

2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞**
   - –í `fileParserService.ts` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `rowData` –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤—Å–µ –∫–ª—é—á–∏ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
   - –≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏

### –î–ª—è QA Agent (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):

1. ‚è≥ **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞**:
   ```bash
   curl -X POST "http://localhost:3001/api/upload" \
     -F "file=@/Users/pm/bin/files4upload/Balance/–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å –¥–µ–∫–∞–±—Ä—å 2024 -- –¥–µ–∫–∞–±—Ä—å 2025.xlsx" \
     -F "targetTable=balance" \
     -F "sheetName=–õ–∏—Å—Ç1"
   ```
2. ‚è≥ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î** –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
3. ‚è≥ **–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `period_date` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞—Ç—ã** (`2024-12-01`)

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (case-sensitive –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º)
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–∞–π–ª–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å mapping –≤ –ë–î (–ø—Ä–∏ case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏)
- –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ø–æ–ª—è–º –≤ –æ–±—ä–µ–∫—Ç–µ `row` –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
